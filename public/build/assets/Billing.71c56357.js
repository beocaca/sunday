import{_ as g}from"./AppLayout.8ec9311d.js";import{J as x}from"./SectionBorder.1a05d16b.js";import{D as S,a as P,b as k}from"./DataBillingCard.f7dae733.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";import{f as _}from"./index.590f4998.js";import{k as a,o as i,a as r,w as m,b as n,d as o,e as c,F as u,j as B}from"./app.3ce0088d.js";import"./ConfirmationModal.60162698.js";import"./Modal.09035abd.js";import"./DangerButton.6c27673a.js";import"./SecondaryButton.9fb1985c.js";import"./DialogModal.7ab1b676.js";import"./Button.2e6d22da.js";const C={props:["sessions","plans","subscriptions"],components:{AppLayout:g,JetSectionBorder:x,DataCard:S,DataPlanCard:P,DataBillingCard:k},computed:{visibleSubscriptions(){return this.subscriptions.filter(t=>t.status.toLowerCase()!="cancelled")},cards(){return[{title:"Current Monthly Bill",value:this.pendingBalance,links:[{label:"Payment Details",type:"inertia",ref:"/user/billing/current"}]},{title:"Next Payment Due",value:this.nextPaymentDate,links:[{label:"View payment history",type:"inertia",ref:"/user/billing/current"}]},{title:"Last Payment",value:this.lastPayment,links:[]},{title:"Payment Information",value:this.lastPaymentDate,links:[{label:"Redeem coupon",type:"inertia",ref:"/user/billing/current"}]}]},details(){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0]},pendingBalance(){if(this.details){const t=JSON.parse(this.details.next_payment);return t.currency_code+" "+t.value}return 0},lastPayment(){if(this.details){const t=JSON.parse(this.details.last_payment);return t.amount.currency_code+" "+t.amount.value}return"-"},nextPaymentDate(){return this.details?_(new Date(this.details.next_billing_date),"MMM dd, yyyy"):0},lastPaymentDate(){return this.details?_(new Date(this.details.last_payment_date),"MMM dd, yyyy"):"-"}},methods:{sendSubscriptionAction(t,d){const l=`/v2/subscriptions/${t.id}/agreement/${t.agreement_id}/${d}`;axios.post(l).then(()=>{this.$inertia.reload()})},isCurrentPlan(t){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0].quantity==t.quantity},getLabelSubscribe(t){return this.isBigger(t)?"Upgrade":"Downgrade"},isBigger(t){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0].quantity<t.quantity}}},w=n("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Profile ",-1),M={class:"py-10 mx-auto max-w-8xl sm:px-6 lg:px-8"},L={class:"flex mb-10 plans__info"},A={class:"mb-10 subscriptions__container"},N=n("h4",{class:"mx-2 mb-2 text-3xl font-bold"},"Current Plan",-1),$={class:"mt-5 plans__container"},j=n("h4",{class:"mx-2 mb-2 text-3xl font-bold"},"Plans",-1),q={class:"flex justify-between"},J=n("div",{id:"paypal-button-container"},null,-1);function R(t,d,l,V,F,s){const b=a("data-card"),y=a("data-plan-card"),h=a("data-billing-card"),f=a("jet-section-border"),v=a("app-layout");return i(),r(v,null,{header:m(()=>[w]),default:m(()=>[n("div",null,[n("div",M,[n("div",L,[(i(!0),o(u,null,c(s.cards,e=>(i(),r(b,{key:e.title,info:e},null,8,["info"]))),128))]),n("div",A,[N,(i(!0),o(u,null,c(s.visibleSubscriptions,e=>(i(),r(y,{key:e.id,plan:e,onSuspend:p=>s.sendSubscriptionAction(e,"suspend"),onReactivate:p=>s.sendSubscriptionAction(e,"reactivate"),onCancel:p=>s.sendSubscriptionAction(e,"cancel")},null,8,["plan","onSuspend","onReactivate","onCancel"]))),128))]),n("div",$,[j,n("div",q,[(i(!0),o(u,null,c(l.plans,e=>(i(),r(h,{key:e.id,plan:e,"is-current":s.isCurrentPlan(e),"subscribe-link":`/subscriptions/${e.paypal_plan_id}/subscribe`,"subscribe-label":s.getLabelSubscribe(e)},null,8,["plan","is-current","subscribe-link","subscribe-label"]))),128))])]),J,B(f)])])]),_:1})}var Y=D(C,[["render",R]]);export{Y as default};
