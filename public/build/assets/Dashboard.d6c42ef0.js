import{E as H,l as K,q as f,m as Q,r as x,o as m,j as C,b as l,d as t,a as d,g as u,t as p,u as y,c as h,f as g,F as k,w,h as D,e as R,ac as X,n as $,ad as O,v as Y}from"./app.e6e97f3c.js";import{_ as Z}from"./AppLayout.61ea5a27.js";import{B as L,P as T,L as ee,a as te,s as oe}from"./Viewer.bbfd90ef.js";import{S as se}from"./controls.a182eeda.js";import{J as A}from"./DialogModal.d1e7aea7.js";import{J as I}from"./Button.477681d3.js";import{a as ae,f as F}from"./index.39029ce2.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./ConfirmationModal.a1a61d14.js";import"./Modal.1dbb4fb9.js";import"./DangerButton.335aa55c.js";import"./SecondaryButton.2123890a.js";import"./ItemGroupCell.53b86d13.js";import"./index.e41048c8.js";import"./datetime.b24edd36.js";const ne="/build/assets/undraw_a_day_at_the_park.31663b51.svg",ie="/build/assets/undraw_empty.23b3a35d.svg",le="/build/assets/undraw_game_day_ucx9.b515c44a.svg";const re={class:""},de={class:"flex flex-col mx-auto max-w-8xl sm:pr-6 lg:pr-8 md:flex-row"},ce={class:"pt-12 w-100 md:w-7/12 lg:w-8/12 md:mx-4"},me={class:"flex flex-col justify-between mx-2 md:flex-row md:mr-2 md:ml-0"},ue=t("span",{class:"pl-2 text-lg font-bold"}," Lineup ",-1),pe={class:"flex items-center"},he={class:"w-40 mr-2"},fe={slot:"singleLabel","slot-scope":"props"},_e={class:"option__title"},ye=t("i",{class:"mr-2 fa fa-briefcase"},null,-1),be={slot:"option","slot-scope":"props"},ge={class:"option__desc"},ke={class:"option__title"},we=t("i",{class:"mr-2 fa fa-briefcase"},null,-1),ve={class:"h-10 bg-purple-700 rounded-lg controls"},Se=["onClick"],xe=t("div",{class:"w-full mx-auto prose prose-xl text-center"},[t("img",{src:ne,class:"w-4/12 mx-auto"}),t("p",{class:"mt-4"},"All tasks done. take a rest")],-1),Ce={class:"pt-12 w-100 md:w-5/12 lg:w-4/12 md:ml-4"},De=t("span",{class:"ml-2 text-3xl font-bold"}," Tools ",-1),$e={class:"mt-5 section-card committed"},Oe={class:"section-card committed"},Le={class:"flex justify-between font-bold text-white bg-blue-400"},Te=t("span",null," Links ",-1),Ae=t("i",{class:"fa fa-plus"},null,-1),Ie=[Ae],Fe={class:"text-gray-600 bg-blue-400 body"},Ve={class:"section-card committed"},Be={class:"flex justify-between font-bold text-white bg-blue-400"},je=t("span",null," Agenda ",-1),Pe=u(" Go to Planner "),Me={class:"text-gray-600 bg-blue-400 body"},Ue={class:"mr-2 font-bold"},We={class:"capitalize"},Ee=u(" Today's Standup "),Ne={class:"checkbox-label"},qe=["onChange","id","onUpdate:modelValue"],Je={class:"font-bold"},ze=u(" Complete Day "),Ge={class:"prose prose-xl text-center"},He=t("div",null,[t("img",{src:le,alt:"",class:"w-6/12 mx-auto"})],-1),Ke=t("h2",{class:"text-center"},"Welcome to Daily.",-1),Qe=t("div",{class:"mb-5"}," Create tasks, track the time it takes to get it done, link your promodoros and be more productive! ",-1),Re={class:"text-center"},Xe=u(" Let's start! "),pt={__name:"Dashboard",props:{boards:{type:Array,default(){return[]}},boardTypes:{type:Array,default(){return[]}},boardTemplates:{type:Array,default(){return[]}},todo:{type:[Array,Object],default(){return[]}},agenda:{type:[Array,Object],default(){return[]}},commitDate:{type:String,required:!0},standup:{type:Array,default(){return[]}},links:{type:Array,default(){return[]}},committed:{type:[Array,Object],default(){return[]}},settings:{type:Object,default(){return{}}},user:{type:Object,required:!0}},setup(c){const n=c,a=H({modes:["inbox","daily"],selectedStage:"",modeSelected:"inbox",promodoroColor:"red",standupSummary:[],localCommitDate:new Date,isLoading:!1,showWelcomeScreen:!1,isStandupOpen:!1,isLinkFormOpen:!1,linkData:{},tracker:null});K(a.localCommitDate,(e,o)=>{o&&e.toISOString().slice(0,10)!=o.toISOString().slice(0,10)&&W()}),f(()=>n.todo.filter(e=>e.done).length);const V=f(()=>["daily","inbox"].includes(a.modeSelected)),B=f(()=>["daily","committed"].includes(a.modeSelected)),j=f(()=>O.exports.uniq(n.todo.map(e=>e.stage))),P=f(()=>{const e=a.selectedStage?n.todo.filter(o=>o.stage==a.selectedStage):n.todo.filter(o=>o);return O.exports.orderBy(e,["priority","stage","title"])});Q(()=>{!n.standup.length&&n.todo.length&&(a.standupSummary={...n.todo},a.isStandupOpen=!0),a.showWelcomeScreen=!Boolean(Number(n.settings.hide_welcome_screen)),a.showWelcomeScreen&&fireworks()}),M();function M(){let e=new Date;n.commitDate&&(e=n.commitDate.split("-"),e=ae(new Date(e[0],e[1]-1,e[2]))),a.localCommitDate=e}function U(){a.isLoading=!0;const e=F(oe(new Date,1),"yyyy-MM-dd"),o=F(new Date,"yyyy-MM-dd");let r=n.todo.filter(i=>i.done);r=r.map(i=>(i.commit_date=e,i)),r.forEach(async i=>{await _(i)}),this.updateDaily(o),this.isStandupOpen=!1,this.isLoading=!1,this.$inertia.reload({preserveScroll:!0,preserveState:!0})}function W(){const e=`?commit-date=${this.localCommitDate.toISOString().slice(0,10)}`;this.$inertia.replace(`/${e}`,{only:["committed"],preserveScroll:!0,preserveState:!0})}function _(e){const o=e.id?"PUT":"POST",r=e.id?`/${e.id}`:"";axios({url:`/items${r}`,method:o,data:e}).then(()=>{this.$inertia.reload({preserveScroll:!0,preserveState:!0});const i=this.todo.findIndex(s=>e.id==s.id);return this.todo.splice(i,1),e.done&&(this.todo.length?this.celebrate():this.fireworks()),!0})}function E(e){this.linkData=e,this.isLinkFormOpen=!0}function N(){this.closeLinkForm(),this.$inertia.reload({preserveScroll:!0})}function q(e){this.$refs.Promodoro.setTask(e)}function J(){this.tracker=null,axios("/api/items/todos").then(({data:e})=>{this.todo=e})}function v(e,o){const r=this[o].findIndex(i=>i.id==e.id);this[o].splice(r,1)}function z(){return axios({url:"/api/automations/createTaskFromCalendar/run",method:"POST"}).then(({data:e})=>{e.forEach(o=>{Echo.private(`automations.${o.id}`).listen("AutomationCompleted",r=>{console.log(r),this.$notify({type:"success",title:"Automation Completed",message:"Updated"}),this.$inertia.reload({preserveScroll:!0})})})})}function S(){axios({url:"/api/settings",method:"POST",data:{hide_welcome_screen:!0}}).then(({data:e})=>{this.showWelcomeScreen=!1,this.$inertia.reload({preserveScroll:!0})})}function G(){}return(e,o)=>{const r=x("multiselect"),i=x("inertia-link");return m(),C(Z,{boards:c.boards},{default:l(()=>[t("div",re,[t("div",de,[t("div",ce,[t("div",me,[ue,t("div",pe,[t("div",he,[d(r,{modelValue:a.selectedStage,"onUpdate:modelValue":o[0]||(o[0]=s=>a.selectedStage=s),ref:"input",placeholder:"Filter by stage",class:"w-full","show-labels":!1,options:y(j)},{default:l(()=>[t("template",fe,[t("span",_e,[ye,u(" "+p(n.option),1)])]),t("template",be,[t("div",ge,[t("span",ke,[we,u(" "+p(n.option),1)])])])]),_:1},8,["modelValue","options"])]),t("div",ve,[(m(!0),h(k,null,g(e.modes,s=>(m(),h("button",{key:s,onClick:b=>e.modeSelected=s,class:$([{"bg-purple-400":s==e.modeSelected},"h-full px-8 text-white capitalize rounded-lg"])},p(s),11,Se))),128))])])]),w(d(L,{title:"Commited",tasks:c.committed,onItemDeleted:o[2]||(o[2]=s=>v(s,"committed")),onUpdateItem:_},{default:l(()=>[t("template",null,[e.localCommitDate?(m(),C(se,{key:0,modelValue:e.localCommitDate,"onUpdate:modelValue":o[1]||(o[1]=s=>e.localCommitDate=s)},null,8,["modelValue"])):R("",!0)])]),_:1},8,["tasks"]),[[D,y(B)]]),w(d(L,{title:"To Do","allow-add":!0,boards:c.boards,tasks:y(P),tracker:e.tracker,onUpdateItem:_,onItemDeleted:o[3]||(o[3]=s=>v(s,"todo")),onItemClicked:q},X({_:2},[c.committed.length?{name:"empty",fn:l(()=>[xe])}:{name:"empty",fn:l(()=>[t("div",{class:"w-full mx-auto prose prose-xl text-center"},[t("img",{src:ie,class:"w-4/12 mx-auto"}),t("small",{class:"mt-4 text-gray-400"},[u(" Nothing to do. Add new tasks from here or mark in your "),t("a",{href:"#",onClick:G},"boards"),u(" as todo")])])])}]),1032,["boards","tasks","tracker"]),[[D,y(V)]])]),t("div",Ce,[De,t("div",$e,[t("div",{class:$([e.promodoroColor,"text-gray-600 font-bold px-0"])},[d(T,{ref_key:"Promodoro",ref:T,settings:c.settings,tracker:e.tracker,"v-model:timerColor":e.promodoroColor,tasks:a.todo,onStopped:J},null,8,["settings","tracker","v-model:timerColor","tasks"])],2)]),t("div",Oe,[t("header",Le,[Te,t("button",{class:"text-white bg-transparent",onClick:o[4]||(o[4]=s=>e.isLinkFormOpen=!e.isLinkFormOpen)},Ie)]),t("div",Fe,[d(ee,{links:c.links,onEdit:E},null,8,["links"])])]),t("div",Ve,[t("header",Be,[je,t("div",null,[t("i",{class:"inline-block ml-4 cursor-pointer fa fa-robot",onClick:z}),d(i,{class:"text-white bg-transparent",href:"/planner"},{default:l(()=>[Pe]),_:1})])]),t("div",Me,[(m(!0),h(k,null,g(c.agenda,s=>(m(),h("div",{class:"p-2 text-white rounded-md cursor-pointer hover:bg-blue-500",key:`event-${s.id}`},[t("span",Ue,p(s.time),1),t("span",We,p(s.title),1)]))),128))])])])]),d(A,{show:e.isStandupOpen,onClose:o[6]||(o[6]=s=>e.isStandupOpen=!1)},{title:l(()=>[Ee]),content:l(()=>[t("div",null,[(m(!0),h(k,null,g(e.standupSummary,s=>(m(),h("p",{key:`task-${s.id}`},[t("label",Ne,[w(t("input",{type:"checkbox",onChange:b=>_(s),name:"",id:s.id,"onUpdate:modelValue":b=>s.done=b},null,40,qe),[[Y,s.done]]),t("span",Je," ["+p(s.stage)+"] ",1),t("span",null,p(s.title),1)])]))),128))])]),footer:l(()=>[d(I,{onClick:o[5]||(o[5]=s=>U())},{default:l(()=>[ze]),_:1})]),_:1},8,["show"]),d(A,{show:e.showWelcomeScreen,onClose:S},{content:l(()=>[t("div",Ge,[He,Ke,Qe,t("div",Re,[d(I,{onClick:o[7]||(o[7]=s=>S())},{default:l(()=>[Xe]),_:1})])])]),_:1},8,["show"]),d(te,{"record-data":e.linkData,"is-open":e.isLinkFormOpen,onSaved:N,onCancel:o[8]||(o[8]=s=>e.isLinkFormOpen=!1)},null,8,["record-data","is-open"])])]),_:1},8,["boards"])}}};export{pt as default};
