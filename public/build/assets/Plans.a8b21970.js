import{_ as b}from"./AppLayout.8ec9311d.js";import{J as y}from"./SectionBorder.1a05d16b.js";import{D as _,a as h,b as f}from"./DataBillingCard.f7dae733.js";import{_ as g}from"./plugin-vue_export-helper.21dcd24c.js";import{f as l}from"./index.590f4998.js";import{k as a,o as n,a as o,w as u,b as e,d as x,e as v,F as P,j as S}from"./app.3ce0088d.js";import"./ConfirmationModal.60162698.js";import"./Modal.09035abd.js";import"./DangerButton.6c27673a.js";import"./SecondaryButton.9fb1985c.js";import"./DialogModal.7ab1b676.js";import"./Button.2e6d22da.js";const D={props:{plans:{type:Array,default(){return[]}},subscriptions:{type:Array,default(){return[]}}},components:{AppLayout:b,JetSectionBorder:y,DataCard:_,DataPlanCard:h,DataBillingCard:f},computed:{visibleSubscriptions(){return this.subscriptions.filter(t=>t.status.toLowerCase()!="cancelled")},cards(){return[{title:"Current Monthly Bill",value:this.pendingBalance,links:[{label:"Payment Details",type:"inertia",ref:"/user/billing/current"}]},{title:"Next Payment Due",value:this.nextPaymentDate,links:[{label:"View payment history",type:"inertia",ref:"/user/billing/current"}]},{title:"Last Payment",value:this.lastPayment,links:[]},{title:"Payment Information",value:this.lastPaymentDate,links:[{label:"Redeem coupon",type:"inertia",ref:"/user/billing/current"}]}]},details(){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0]},pendingBalance(){if(this.details){const t=JSON.parse(this.details.next_payment);return t.currency_code+" "+t.value}return 0},lastPayment(){if(this.details){const t=JSON.parse(this.details.last_payment);return t.amount.currency_code+" "+t.amount.value}return"-"},nextPaymentDate(){return this.details?l(new Date(this.details.next_billing_date),"MMM dd, yyyy"):0},lastPaymentDate(){return this.details?l(new Date(this.details.last_payment_date),"MMM dd, yyyy"):"-"}},methods:{sendSubscriptionAction(t,r){const s=`/v2/subscriptions/${t.id}/agreement/${t.agreement_id}/${r}`;axios.post(s).then(()=>{this.$inertia.reload()})},isCurrentPlan(t){return console.log(this.visibleSubscriptions[0].quantity,t.quantity),this.visibleSubscriptions.length&&this.visibleSubscriptions[0].quantity==t.quantity},getLabelSubscribe(t){return this.isBigger(t)?"Upgrade":"Downgrade"},isBigger(t){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0].quantity<t.quantity}}},k=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Profile ",-1),B={class:"py-10 mx-auto max-w-8xl sm:px-6 lg:px-8"},w={class:"mt-5 plans__container"},C=e("h4",{class:"mx-2 mb-2 text-3xl font-bold"},"Plans",-1),$={class:"flex justify-between"},M=e("div",{id:"paypal-button-container"},null,-1);function q(t,r,s,L,N,c){const d=a("data-billing-card"),p=a("jet-section-border"),m=a("app-layout");return n(),o(m,null,{header:u(()=>[k]),default:u(()=>[e("div",null,[e("div",B,[e("div",w,[C,e("div",$,[(n(!0),x(P,null,v(s.plans,i=>(n(),o(d,{key:i.id,plan:i,"subscribe-link":`/subscriptions/${i.paypal_plan_id}/subscribe`,"subscribe-label":c.getLabelSubscribe(i)},null,8,["plan","subscribe-link","subscribe-label"]))),128))])]),M,S(p)])])]),_:1})}var H=g(D,[["render",q]]);export{H as default};
