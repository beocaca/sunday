import{J as V}from"./ActionMessage.114a7227.js";import{J as I}from"./ActionSection.f517c342.js";import{J as N}from"./Button.2e6d22da.js";import{J as M}from"./ConfirmationModal.60162698.js";import{J as U}from"./DangerButton.6c27673a.js";import{J as L}from"./DialogModal.7ab1b676.js";import{J as E,a as q}from"./Label.63bee86a.js";import{J as z,a as Y}from"./InputError.2a52f420.js";import{i as G,B as H,o as l,d as a,k as r,j as n,w as o,b as c,q as _,F as h,e as v,t as k,n as y,g as i}from"./app.3ce0088d.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import{J as K}from"./SecondaryButton.9fb1985c.js";import{J as O}from"./SectionBorder.1a05d16b.js";import"./SectionTitle.e7792249.js";import"./Modal.09035abd.js";const Q={model:{prop:"checked",event:"change"},props:{checked:{type:[Array,Boolean],default:!1},value:{default:null}},computed:{proxyChecked:{get(){return this.checked},set(m){this.$emit("change",m)}}}},R=["value"];function W(m,s,d,x,e,p){return G((l(),a("input",{type:"checkbox",value:d.value,"onUpdate:modelValue":s[0]||(s[0]=g=>p.proxyChecked=g),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,8,R)),[[H,p.proxyChecked]])}var X=F(Q,[["render",W]]);const Z={components:{JetActionMessage:V,JetActionSection:I,JetButton:N,JetConfirmationModal:M,JetDangerButton:U,JetDialogModal:L,JetFormSection:E,JetInput:z,JetCheckbox:X,JetInputError:Y,JetLabel:q,JetSecondaryButton:K,JetSectionBorder:O},props:["tokens","availablePermissions","defaultPermissions"],data(){return{createApiTokenForm:this.$inertia.form({name:"",permissions:this.defaultPermissions}),updateApiTokenForm:this.$inertia.form({permissions:[]}),deleteApiTokenForm:this.$inertia.form(),displayingToken:!1,managingPermissionsFor:null,apiTokenBeingDeleted:null}},methods:{createApiToken(){this.createApiTokenForm.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{this.displayingToken=!0,this.createApiTokenForm.reset()}})},manageApiTokenPermissions(m){this.updateApiTokenForm.permissions=m.abilities,this.managingPermissionsFor=m},updateApiToken(){this.updateApiTokenForm.put(route("api-tokens.update",this.managingPermissionsFor),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.managingPermissionsFor=null})},confirmApiTokenDeletion(m){this.apiTokenBeingDeleted=m},deleteApiToken(){this.deleteApiTokenForm.delete(route("api-tokens.destroy",this.apiTokenBeingDeleted),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.apiTokenBeingDeleted=null})}}},$=i(" Create API Token "),ee=i(" API tokens allow third-party services to authenticate with our application on your behalf. "),oe={class:"col-span-6 sm:col-span-4"},te={key:0,class:"col-span-6"},se={class:"grid grid-cols-1 gap-4 mt-2 md:grid-cols-2"},ne={class:"flex items-center"},ie={class:"ml-2 text-sm text-gray-600"},re=i(" Created. "),le=i(" Create "),ae={key:0},ce={class:"mt-10 sm:mt-0"},me=i(" Manage API Tokens "),de=i(" You may delete any of your existing tokens if they are no longer needed. "),pe={class:"space-y-6"},ue={class:"flex items-center"},_e={key:0,class:"text-sm text-gray-400"},ke=["onClick"],ge=["onClick"],fe=i(" API Token "),he=c("div",null," Please copy your new API token. For your security, it won't be shown again. ",-1),ve={key:0,class:"px-4 py-2 mt-4 font-mono text-sm text-gray-500 bg-gray-100 rounded"},ye=i(" Close "),Te=i(" API Token Permissions "),Ae={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},be={class:"flex items-center"},Fe={class:"ml-2 text-sm text-gray-600"},xe=i(" Nevermind "),je=i(" Save "),Ce=i(" Delete API Token "),Pe=i(" Are you sure you would like to delete this API token? "),Je=i(" Nevermind "),we=i(" Delete ");function Se(m,s,d,x,e,p){const g=r("jet-label"),j=r("jet-input"),C=r("jet-input-error"),T=r("jet-checkbox"),P=r("jet-action-message"),A=r("jet-button"),J=r("jet-form-section"),w=r("jet-section-border"),S=r("jet-action-section"),f=r("jet-secondary-button"),b=r("jet-dialog-modal"),B=r("jet-danger-button"),D=r("jet-confirmation-modal");return l(),a("div",null,[n(J,{onSubmitted:p.createApiToken},{title:o(()=>[$]),description:o(()=>[ee]),form:o(()=>[c("div",oe,[n(g,{for:"name",value:"Name"}),n(j,{id:"name",type:"text",class:"block w-full mt-1",modelValue:e.createApiTokenForm.name,"onUpdate:modelValue":s[0]||(s[0]=t=>e.createApiTokenForm.name=t),autofocus:""},null,8,["modelValue"]),n(C,{message:e.createApiTokenForm.errors.name,class:"mt-2"},null,8,["message"])]),d.availablePermissions.length>0?(l(),a("div",te,[n(g,{for:"permissions",value:"Permissions"}),c("div",se,[(l(!0),a(h,null,v(d.availablePermissions,t=>(l(),a("div",{key:t},[c("label",ne,[n(T,{value:t,modelValue:e.createApiTokenForm.permissions,"onUpdate:modelValue":s[1]||(s[1]=u=>e.createApiTokenForm.permissions=u)},null,8,["value","modelValue"]),c("span",ie,k(t),1)])]))),128))])])):_("",!0)]),actions:o(()=>[n(P,{on:e.createApiTokenForm.recentlySuccessful,class:"mr-3"},{default:o(()=>[re]),_:1},8,["on"]),n(A,{class:y({"opacity-25":e.createApiTokenForm.processing}),disabled:e.createApiTokenForm.processing},{default:o(()=>[le]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"]),d.tokens.length>0?(l(),a("div",ae,[n(w),c("div",ce,[n(S,null,{title:o(()=>[me]),description:o(()=>[de]),content:o(()=>[c("div",pe,[(l(!0),a(h,null,v(d.tokens,t=>(l(),a("div",{class:"flex items-center justify-between",key:t.id},[c("div",null,k(t.name),1),c("div",ue,[t.last_used_ago?(l(),a("div",_e," Last used "+k(t.last_used_ago),1)):_("",!0),d.availablePermissions.length>0?(l(),a("button",{key:1,class:"ml-6 text-sm text-gray-400 underline cursor-pointer",onClick:u=>p.manageApiTokenPermissions(t)}," Permissions ",8,ke)):_("",!0),c("button",{class:"ml-6 text-sm text-red-500 cursor-pointer",onClick:u=>p.confirmApiTokenDeletion(t)}," Delete ",8,ge)])]))),128))])]),_:1})])])):_("",!0),n(b,{show:e.displayingToken,onClose:s[3]||(s[3]=t=>e.displayingToken=!1)},{title:o(()=>[fe]),content:o(()=>[he,m.$page.props.jetstream.flash.token?(l(),a("div",ve,k(m.$page.props.jetstream.flash.token),1)):_("",!0)]),footer:o(()=>[n(f,{onClick:s[2]||(s[2]=t=>e.displayingToken=!1)},{default:o(()=>[ye]),_:1})]),_:1},8,["show"]),n(b,{show:e.managingPermissionsFor,onClose:s[6]||(s[6]=t=>e.managingPermissionsFor=null)},{title:o(()=>[Te]),content:o(()=>[c("div",Ae,[(l(!0),a(h,null,v(d.availablePermissions,t=>(l(),a("div",{key:t},[c("label",be,[n(T,{value:t,modelValue:e.updateApiTokenForm.permissions,"onUpdate:modelValue":s[4]||(s[4]=u=>e.updateApiTokenForm.permissions=u)},null,8,["value","modelValue"]),c("span",Fe,k(t),1)])]))),128))])]),footer:o(()=>[n(f,{onClick:s[5]||(s[5]=t=>e.managingPermissionsFor=null)},{default:o(()=>[xe]),_:1}),n(A,{class:y(["ml-2",{"opacity-25":e.updateApiTokenForm.processing}]),onClick:p.updateApiToken,disabled:e.updateApiTokenForm.processing},{default:o(()=>[je]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),n(D,{show:e.apiTokenBeingDeleted,onClose:s[8]||(s[8]=t=>e.apiTokenBeingDeleted=null)},{title:o(()=>[Ce]),content:o(()=>[Pe]),footer:o(()=>[n(f,{onClick:s[7]||(s[7]=t=>e.apiTokenBeingDeleted=null)},{default:o(()=>[Je]),_:1}),n(B,{class:y(["ml-2",{"opacity-25":e.deleteApiTokenForm.processing}]),onClick:p.deleteApiToken,disabled:e.deleteApiTokenForm.processing},{default:o(()=>[we]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"])])}var Ke=F(Z,[["render",Se]]);export{Ke as default};
